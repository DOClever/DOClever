<html>
  <head>
    <link
      rel="stylesheet"
      href="https://unpkg.com/purecss@1.0.0/build/pure-min.css"
      integrity="sha384-nn4HPE8lTHyVtfCBi5yW9d20FjT8BJwUXyWZT9InLYax14RDjBj46LmSztkmNP9w"
      crossorigin="anonymous">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans">
    <link rel="stylesheet" href="http://thecodebarbarian.com/style/github.css">

    <style>
      html {
        font-family: 'Open Sans';
      }

      body {
        margin: 0;
      }

      a {
        text-decoration: none;
      }

      #logo {
        width: 62px;
        height: 30px;
        position: relative;
        top: 5px;
      }

      .logo-text {
        color: #800;
        font-size: 20pt;
        position: relative;
        top: 0px;
        left: 10px;
        text-transform: none;
      }

      .pure-menu-item {
        height: 30px;
        font-size: 13pt;
        padding-top: 0px;
      }

      .pure-menu-link {
        padding-top: 2px;
      }

      li.sub-item {
        height: 25px;
        font-size: 11pt;
        margin-left: 20px;
      }

      #logo-container {
        position: relative;
        top: -4px;
        padding-bottom: 6px;
        border-bottom: 1px solid #ddd;
      }

      #menu {
        z-index: 1;
        position: fixed;
        top: 0;
        left: 0;
        height: 100%;
        background-color: #eee;
        width: 250px;
        border-right: 1px solid #ddd;
      }

      .container {
        position: relative;
        left: 250px;
        padding-left: 50px;
        width: 850px;
      }

      pre {
        display: block;
        padding: 9.5px;
        margin: 10px 0 10px;
        font-size: 13px;
        line-height: 1.42857143;
        color: #333;
        word-break: break-all;
        word-wrap: break-word;
        background-color: #f5f5f5;
        border: 1px solid #ccc;
        border-radius: 4px;
        font-family: Menlo,Monaco,Consolas,"Courier New",monospace;
      }

      #mobile-menu {
        display: none;
      }

      @media (max-width: 1160px) {
        .container {
          width: 100%;
          padding: 0px;
          left: 0px;
          margin: auto;
        }

        #content {
          margin: 10px;
        }

        #menu {
          display: none;
          position: absolute;
          top: 45px;
          border-top: 1px solid #ddd;
          border-right: 1px solid #ddd;
          border-bottom: 1px solid #ddd;
          left: 0px;
        }

        pre {
          margin: 0px;
          margin-top: 10px;
        }

        #mobile-menu {
          display: block;
          height: 45px;
          background-color: #eee;
          border-bottom: 1px solid #ddd;
        }

        #logo {
          border: 0;
        }

        #mobile-logo-container {
          padding: 0;
          border: 0px;
          padding-top: 3px;
          padding-bottom: 3px;
          width: 215px;
          margin-left: auto;
          margin-right: auto;
        }

        #logo-container {
          display: none;
        }

        .menu-link {
          position: absolute;
          display: block;
          top: 0px;
          left: 0;
          background-color: #eee;
          font-size: 10px; /* change this value to increase/decrease button size */
          z-index: 10;
          width: 2em;
          height: 3px;
          padding: 2.1em 1.6em;
        }

        .menu-link:hover,
        .menu-link:focus {
          background: #ddd;
        }

        .menu-link span {
          position: relative;
          display: block;
        }

        .menu-link span,
        .menu-link span:before,
        .menu-link span:after {
          background-color: #333;
          width: 100%;
          height: 0.2em;
        }

        .menu-link span:before,
        .menu-link span:after {
          position: absolute;
          margin-top: -0.6em;
          content: " ";
        }

        .menu-link span:after {
          margin-top: 0.6em;
        }

        .active {
          display: block !important;
        }
      }
    </style>
  </head>

  <body>
    <div id="layout">
      <div id="mobile-menu">
        <a href="#menu" class="menu-link" id="menuLink">
          <span></span>
        </a>
        <div id="mobile-logo-container">
          <a href="#">
            <img id="logo" src="./mongoose5_transparent.png">
            <span class="logo-text">mongoose</span>
          </a>
        </div>
      </div>

      <div id="menu">
        <div class="pure-menu">
          <div id="logo-container" class="pure-menu-heading">
            <a href="#">
              <img id="logo" src="./mongoose5_transparent.png">
              <span class="logo-text">mongoose</span>
            </a>
          </div>
          <ul class="pure-menu-list">
            <li class="pure-menu-item">
              <a class="pure-menu-link">Quick Start</a>
            </li>
            <li class="pure-menu-item">
              <a class="pure-menu-link">Guide</a>
            </li>
            <li class="pure-menu-item sub-item">
              <a class="pure-menu-link">Schemas</a>
            </li>
            <li class="pure-menu-item sub-item">
              <a href="#" class="pure-menu-link">Connections</a>
            </li>
            <li class="pure-menu-item sub-item">
              <a href="#" class="pure-menu-link">Models</a>
            </li>
            <li class="pure-menu-item sub-item">
              <a href="#" class="pure-menu-link">Documents</a>
            </li>
            <li class="pure-menu-item sub-item">
              <a href="#" class="pure-menu-link">Queries</a>
            </li>
            <li class="pure-menu-item sub-item">
              <a href="#" class="pure-menu-link">Validation</a>
            </li>
            <li class="pure-menu-item sub-item">
              <a href="#" class="pure-menu-link">Middleware</a>
            </li>
            <li class="pure-menu-item sub-item">
              <a href="#" class="pure-menu-link">Population</a>
            </li>
            <li class="pure-menu-item sub-item">
              <a href="#" class="pure-menu-link">Discriminators</a>
            </li>


            <li class="pure-menu-item">
              <a class="pure-menu-link">API</a>
            </li>
            <li class="pure-menu-item sub-item">
              <a class="pure-menu-link">Schema</a>
            </li>
            <li class="pure-menu-item sub-item">
              <a href="#" class="pure-menu-link">Document</a>
            </li>
            <li class="pure-menu-item sub-item">
              <a href="#" class="pure-menu-link">Model</a>
            </li>
            <li class="pure-menu-item sub-item">
              <a href="#" class="pure-menu-link">Query</a>
            </li>
            <li class="pure-menu-item sub-item">
              <a href="#" class="pure-menu-link">Aggregate</a>
            </li>
            <li class="pure-menu-item sub-item">
              <a href="#" class="pure-menu-link">SchemaType</a>
            </li>
            <li class="pure-menu-item sub-item">
              <a href="#" class="pure-menu-link">VirtualType</a>
            </li>
            <li class="pure-menu-item sub-item">
              <a href="#" class="pure-menu-link">Error</a>
            </li>

            <li class="pure-menu-item">
              <a class="pure-menu-link">Version Compatibility</a>
            </li>
            <li class="pure-menu-item">
              <a class="pure-menu-link">FAQ</a>
            </li>
          </ul>
        </div>
      </div>

      <div class="container">
        <div id="content">
          <h1>Header</h1>
          <p>
          Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque faucibus lobortis enim, eu sodales risus bibendum vitae. Phasellus aliquam ultrices sem non posuere. Aenean finibus a massa nec euismod. Donec ullamcorper, sapien rhoncus tempor rhoncus, purus arcu eleifend mauris, ullamcorper maximus magna arcu vel purus. Sed consequat nibh ipsum, vitae commodo risus rhoncus in. Morbi et dolor ultrices, finibus urna at, hendrerit ex. Morbi suscipit eget leo quis vehicula. Curabitur eu lacinia turpis. Sed ut bibendum nisl.
          </p>

          <p>
            Integer id turpis magna. Nunc lectus lectus, pellentesque vel vulputate ac, pharetra eu tortor. Phasellus arcu erat, pellentesque et nibh non, dignissim scelerisque lacus. Pellentesque mattis ipsum a tincidunt porttitor. Suspendisse ut congue magna. Donec aliquam lectus libero, in feugiat dolor ornare sit amet. Nulla et molestie libero. Lorem ipsum dolor sit amet, consectetur adipiscing elit.
          </p>

          <p>
            Donec aliquet ac turpis vitae elementum. Nullam volutpat mattis leo, id facilisis orci porta nec. Nulla vel faucibus ex, et gravida felis. Nulla facilisi. Donec ut felis ut ante fringilla dapibus id sed mi. Donec a blandit velit, id ultricies risus. Vivamus bibendum odio sit amet vehicula tincidunt. Phasellus blandit dui urna, blandit venenatis erat tincidunt eget. Nunc pretium sodales ligula, ut faucibus orci elementum sit amet. Curabitur luctus, est in rutrum congue, est lorem luctus dui, vitae auctor libero lacus ut enim. Nullam neque est, pellentesque ac viverra pretium, varius ut risus.
          </p>

          <p>
            Pellentesque blandit quam turpis, sit amet ullamcorper dui malesuada tincidunt. Donec ac mattis urna, nec posuere nunc. Aenean non urna ultrices, convallis mauris non, efficitur lacus. Duis eget metus sed magna convallis lobortis ac et est. Suspendisse tincidunt ligula arcu. Aenean at euismod elit, a suscipit ante. Nulla porttitor sit amet justo et vestibulum. Cras sodales leo a velit tempor, sit amet commodo odio tincidunt. In nec tempus dolor. In bibendum sodales enim nec rhoncus.
          </p>

          <p>
            Duis convallis a ante vel imperdiet. Vivamus nec arcu mollis, malesuada felis sit amet, aliquet elit. Aliquam erat volutpat. Morbi consequat orci sit amet tellus convallis laoreet. Nunc sed suscipit neque. Fusce convallis nisi ligula, et maximus lorem tincidunt eu. Morbi nec venenatis justo. Morbi laoreet lectus at vestibulum placerat. Pellentesque bibendum magna velit, convallis euismod leo fringilla vel. Duis maximus elementum enim, dignissim accumsan ex finibus ac. Aliquam erat volutpat. Etiam sit amet commodo enim. Pellentesque ac est eget ipsum fermentum facilisis sit amet sed nisl.
          </p>

<pre><code class="lang-javascript"><span class="hljs-keyword">const</span> mongoose = <span class="hljs-built_in">require</span>(<span class="hljs-string">'mongoose'</span>);

mongoose.connect(<span class="hljs-string">'mongodb://localhost:27017/test'</span>);
mongoose.set(<span class="hljs-string">'debug'</span>, <span class="hljs-literal">true</span>);

<span class="hljs-keyword">const</span> vehicleSchema = <span class="hljs-keyword">new</span> mongoose.Schema({
make: <span class="hljs-built_in">String</span>,
model: <span class="hljs-built_in">String</span>,
year: <span class="hljs-built_in">Number</span>,
customerId: mongoose.Schema.Types.ObjectId
});

<span class="hljs-keyword">const</span> customerSchema = <span class="hljs-keyword">new</span> mongoose.Schema({
vehicle: { type: vehicleSchema, required: <span class="hljs-literal">true</span> }
});

<span class="hljs-comment">// Callback-style middleware, your only option in 4.x</span>
vehicleSchema.pre(<span class="hljs-string">'save'</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">next</span>) </span>{
Customer.updateMany({ <span class="hljs-string">'vehicle._id'</span>: <span class="hljs-keyword">this</span>._id }, { $set: { vehicle: <span class="hljs-keyword">this</span> } }, (error) =&gt; {
next(error);
});
});

<span class="hljs-keyword">const</span> Vehicle = mongoose.model(<span class="hljs-string">'Vehicle'</span>, vehicleSchema);
<span class="hljs-keyword">const</span> Customer = mongoose.model(<span class="hljs-string">'Customer'</span>, customerSchema);

run().catch(error =&gt; <span class="hljs-built_in">console</span>.error(error.stack));

<span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">run</span>(<span class="hljs-params"></span>) </span>{
<span class="hljs-keyword">const</span> v = <span class="hljs-keyword">await</span> Vehicle.create({ make: <span class="hljs-string">'Subaru'</span>, model: <span class="hljs-string">'Crosstrek'</span>, year: <span class="hljs-number">2016</span> });
<span class="hljs-keyword">let</span> customer = <span class="hljs-keyword">await</span> Customer.create({ vehicle: v });

v.year = <span class="hljs-number">2018</span>;
<span class="hljs-keyword">await</span> v.save();

<span class="hljs-comment">// `year` will be '2018'</span>
<span class="hljs-built_in">console</span>.log(<span class="hljs-keyword">await</span> Customer.findById(customer._id));
}
</code></pre>
        </div>
      </div>
    </div>

    <script type="text/javascript">
    (function (window, document) {

      var layout   = document.getElementById('layout'),
          menu     = document.getElementById('menu'),
          menuLink = document.getElementById('menuLink'),
          content  = document.getElementById('content');

      function toggleClass(element, className) {
          var classes = element.className.split(/\s+/),
              length = classes.length,
              i = 0;

          for(; i < length; i++) {
            if (classes[i] === className) {
              classes.splice(i, 1);
              break;
            }
          }
          // The className is not found
          if (length === classes.length) {
              classes.push(className);
          }

          element.className = classes.join(' ');
      }

      function toggleAll(e) {
          var active = 'active';

          e.preventDefault();
          toggleClass(layout, active);
          toggleClass(menu, active);
          toggleClass(menuLink, active);
      }

      menuLink.onclick = function (e) {
          toggleAll(e);
      };

      content.onclick = function(e) {
          if (menu.className.indexOf('active') !== -1) {
              toggleAll(e);
          }
      };

    }(this, this.document));
    </script>
  </body>
</html>
