{"version":3,"sources":["webpack:///./web/login/login.js"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA,iCAAiC;AACjC,6BAA6B;AAC7B,yBAAyB;AACzB;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,iBAAiB;AACjB;AACA,SAAS;AACT;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,C","file":"login.js","sourcesContent":["/**\n * Created by sunxin on 2016/12/28.\n */\nvar vue=new Vue({\n    el: \"#app\",\n    data: {\n        username:\"\",\n        pwd:\"\",\n        loginPending:false,\n        remember:0,\n        openId:\"\"\n    },\n    methods:{\n        login:function () {\n            var _this=this;\n            if(!this.username || !this.pwd)\n            {\n                this.$message.error('用户名密码不能为空');\n                return;\n            }\n            this.loginPending=true;\n            net.post(\"/user/login\",{\n                name:_this.username,\n                password:_this.pwd,\n            },{\n                \"content-type\":\"application/x-www-form-urlencoded\"\n            }).then(function (data) {\n                _this.loginPending=false;\n                if(data.code==200)\n                {\n                    _this.$notify({\n                        title: '登录成功',\n                        type: 'success'\n                    });\n                    session.clear()\n                    session.update(data.data,_this.remember);\n                    setTimeout(function () {\n                        location.href=\"../project/project.html\"\n                    },1500);\n                }\n                else\n                {\n                    _this.$notify({\n                        title: data.msg,\n                        type: 'error'\n                    });\n                }\n            })\n        },\n        qqLogin:function() {\n            var _this=this;\n            var win=QC.Login.showPopup({});\n            var loop=setInterval(function () {\n                if(win.closed)\n                {\n                    clearInterval(loop);\n                    if(QC.Login.check())\n                    {\n                        var obj;\n                        QC.api(\"get_user_info\", {}).success(function(s){\n                            obj=s.data;\n                            QC.Login.getMe(function (openId,accessToken) {\n                                _this.openId=openId;\n                                net.post(\"/user/login\",{\n                                    qqid:openId,\n                                    qqimg:obj.figureurl_qq_1\n                                }).then(function (data) {\n                                    if(data.code==200)\n                                    {\n                                        _this.$notify({\n                                            title: '登录成功',\n                                            type: 'success'\n                                        });\n                                        session.clear()\n                                        session.update(data.data,_this.remember);\n                                        setTimeout(function () {\n                                            location.href=\"../project/project.html\"\n                                        },1500);\n                                    }\n                                    else if(data.code==2)\n                                    {\n                                        sessionStorage.setItem(\"qqid\",openId);\n                                        sessionStorage.setItem(\"qqname\",obj.nickname);\n                                        sessionStorage.setItem(\"qqimg\",obj.figureurl_qq_1);\n                                        window.open(location.protocol+\"//\"+location.host+\"/html/web/register/registerqq.html\")\n                                    }\n                                    else\n                                    {\n                                        _this.$notify({\n                                            title: data.msg,\n                                            type: 'error'\n                                        });\n                                    }\n                                })\n                            })\n                        })\n                    }\n                }\n            },500);\n        }\n    },\n    created:function () {\n        var _this=this;\n        window.addEventListener('message',function(e){\n            if(e.origin==location.protocol+\"//\"+location.host)\n            {\n                var obj;\n                try\n                {\n                    obj=JSON.parse(e.data);\n                }\n                catch (err)\n                {\n                    return;\n                }\n                if(!obj.name || !obj.password)\n                {\n                    return;\n                }\n                net.post(\"/user/login\",{\n                    name:obj.name,\n                    password:obj.password,\n                }).then(function (data) {\n                    if(data.code==200)\n                    {\n                        _this.$notify({\n                            title: '登录成功',\n                            type: 'success'\n                        });\n                        session.clear()\n                        session.update(data.data,_this.remember);\n                        setTimeout(function () {\n                            location.href=\"../project/project.html\"\n                        },1000);\n                    }\n                    else\n                    {\n                        _this.$notify({\n                            title: data.msg,\n                            type: 'error'\n                        });\n                    }\n                })\n            }\n        },false);\n    }\n})\n$.ready(function () {\n    document.body.onkeydown=function (e) {\n        var event=window.event || e;\n        if(event.keyCode==13)\n        {\n            var event1 = document.createEvent('HTMLEvents');\n            event1.initEvent(\"click\", true, true);\n            event1.eventType = 'message';\n            document.getElementById(\"login\").dispatchEvent(event1);\n        }\n    }\n})\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./web/login/login.js\n// module id = 337\n// module chunks = 14"],"sourceRoot":""}