webpackJsonp([2],{313:function(t,e,n){(function(t,e,a){var o=n(6),i=n(34),r=n(31),s=n(33),c=n(30),d=n(32),u=n(86);sessionStorage.getItem("admin")||(location.href="/");new t({el:"#app",data:{tab:"user"},components:{mainnav:o,project:r,team:s,user:i,interface:c,setting:d},store:u,methods:{},created:function(){Promise.all([e.get("/admin/userstatistics"),e.get("/admin/projectstatistics"),e.get("/admin/teamstatistics"),e.get("/admin/interfacestatistics")]).then(function(t){var e=t[0],n=t[1],o=t[2],i=t[3];if(200!=e.code)throw e.msg;if(u.commit("setUserInfo",e.data),200!=n.code)throw n.msg;if(u.commit("setProjectInfo",n.data),200!=o.code)throw o.msg;if(u.commit("setTeamInfo",o.data),200!=i.code)throw i.msg;u.commit("setInterfaceInfo",i.data),a.stopLoading()}).catch(function(t){a.stopLoading(),"string"==typeof t?a.notify(t,0):a.notify("获取失败",0)})}});a.ready(function(){a.startLoading()})}).call(e,n(2),n(3),n(0))},86:function(t,e,n){(function(e,n){t.exports=new e.Store({state:{user:{total:0,todayLogin:0,todayRegister:0,list:[]},project:{total:0,todayCreate:0,list:[]},team:{total:0,todayCreate:0,list:[]},interface:{total:0,todayCreate:0}},mutations:{setUserInfo:function(t,e){t.user.total=e.total,t.user.todayLogin=e.login,t.user.todayRegister=e.register},setProjectInfo:function(t,e){t.project.total=e.total,t.project.todayCreate=e.today},setTeamInfo:function(t,e){t.team.total=e.total,t.team.todayCreate=e.today},setInterfaceInfo:function(t,e){t.interface.total=e.total,t.interface.todayCreate=e.today}},actions:{userList:function(t,e){return n.get("/admin/userlist",e).then(function(e){return 200==e.code&&(t.state.user.list=e.data),e})},saveUser:function(t,e){return n.upload("post","/admin/user",e).then(function(e){return 200==e.code&&t.state.user.list.forEach(function(t){t._id==e.data._id&&(t.name=e.data.name,t.photo=e.data.photo,t.state=e.data.state)}),e})},removeUser:function(t,e){return n.delete("/admin/user",{id:e.id}).then(function(n){return 200==n.code&&t.state.user.list.splice(e.index,1),n})},saveProject:function(t,e){return n.put("/admin/project",e).then(function(e){return 200==e.code&&t.state.project.list.forEach(function(t){t._id==e.data._id&&(t.name=e.data.name,t.public=e.data.public)}),e})},removeProject:function(t,e){return n.delete("/admin/project",{id:e.id}).then(function(n){return 200==n.code&&t.state.project.list.splice(e.index,1),n})},projectList:function(t,e){return n.get("/admin/projectlist",e).then(function(e){return 200==e.code&&(t.state.project.list=e.data),e})},teamList:function(t,e){return n.get("/admin/teamlist",e).then(function(e){return 200==e.code&&(t.state.team.list=e.data),e})},removeTeam:function(t,e){return n.delete("/admin/team",{id:e.id}).then(function(n){return 200==n.code&&t.state.team.list.splice(e.index,1),n})},editPassword:function(t,e){return n.put("/admin/password",e).then(function(t){return t})}}})}).call(e,n(17),n(3))}},[313]);