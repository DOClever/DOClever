webpackJsonp([4],{131:function(e,t,n){(function(e,t,o,i){var r=n(7),c=n(30),s=n(31);e.get("id")?e.get("projectId")||(location.href="../project/project.html"):location.href="../login/login.html";new t({el:"#app",data:{type:0,session:o.clone(e.raw()),project:{},name:"",role:0,invitePending:!1,infoPending:!1,deletePending:!1},computed:{users:function(){var t=this.project.users;return this.project.users=t.filter(function(t){return t.user._id!=e.get("id")}),this.project.users}},components:{mainnav:r,urllist:c,useredit:s},methods:{saveInfo:function(){var t=this;this.infoPending=!0,i.post("/project/create",{id:e.get("projectId"),dis:t.project.dis,name:t.project.name}).then(function(e){t.infoPending=!1,e.code?o.notify("修改成功",1):o.notify(e.msg,0)})},saveUrls:function(e){this.project.baseUrls=e},invite:function(){var t=this;this.invitePending=!0,i.post("/project/member",{id:e.get("projectId"),user:t.name,role:t.role}).then(function(e){t.invitePending=!1,200==e.code?(o.notify("修改成功",1),t.project.users.push(e.data)):o.notify(e.msg,0)})},removeProject:function(){var t=this;1==this.session.own?o.confirm("确定删除该工程？该工程下的所有数据都会被删除!",function(){t.deletePending=!0,i.delete("/project/item",{id:e.get("projectId")}).then(function(e){t.deletePending=!1,200==e.code&&(o.notify("删除成功",1),setTimeout(function(){location.href="../project/project.html"},1500))})}):o.confirm("确定退出该工程？",function(){t.deletePending=!0,i.delete("/project/quit",{id:e.get("projectId")}).then(function(e){t.deletePending=!1,200==e.code?(o.notify("退出成功",1),setTimeout(function(){location.href="../project/project.html"},1500)):o.notify(e.msg,0)})})}},created:function(){var t=this;i.get("/project/info",{id:e.get("projectId")}).then(function(e){o.stopLoading(),200==e.code&&(t.project=e.data)})}});o.ready(function(){o.startLoading()})}).call(t,n(3),n(0),n(2),n(5))}},[131]);