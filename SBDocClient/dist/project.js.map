{"version":3,"sources":["webpack:///./web/project/project.js"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA;AACA;AACA,sCAAsC;AACtC,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,4BAA4B;AACxD;AACA;AACA;AACA,4BAA4B,yBAAyB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT,KAAK;AACL,CAAC;AACD;AACA;AACA,CAAC,C","file":"project.js","sourcesContent":["/**\n * Created by sunxin on 2016/12/19.\n */\nvar mainNav=require(\"../component/mainNav.vue\")\nvar projectList=require(\"../component/projectList.vue\")\nvar teamList=require(\"../component/teamList.vue\")\nif(!session.get(\"id\"))\n{\n    location.href=\"../login/login.html\"\n}\nsession.remove(\"teamId\");\nsession.remove(\"teamName\");\nsession.remove(\"teamRole\");\nsession.remove(\"teamOwn\");\nsession.remove(\"versionId\");\nsession.remove(\"versionName\");\nsession.remove(\"versionDis\");\nvar vue=new Vue({\n    el: \"#app\",\n    data: {\n        photo:session.get(\"photo\"),\n        name:session.get(\"name\"),\n        projectList:[],\n        teamList:[],\n        showAdd:false,\n        showTeam:false,\n        name:\"\",\n        dis:\"\",\n        addPending:false,\n        arrApply:[],\n        showApply:false\n    },\n    components:{\n        \"mainnav\":mainNav,\n        \"projectlist\":projectList,\n        \"teamlist\":teamList\n    },\n    methods:{\n        addProject:function () {\n            if(!this.name)\n            {\n                this.$message.error(\"请输入名称\");\n                return;\n            }\n            var _this=this;\n            this.addPending=true;\n            net.post(\"/project/create\",{\n                name:_this.name,\n                dis:_this.dis\n            },{\n                \"content-type\":\"application/x-www-form-urlencoded\"\n            }).then(function (data) {\n                _this.addPending=false;\n                _this.name=\"\";\n                _this.dis=\"\"\n                if(data.code==200)\n                {\n                    _this.projectList.unshift(data.data);\n                    _this.$notify({\n                        title: '创建成功',\n                        type: 'success'\n                    });\n                    _this.showAdd=false;\n                }\n            })\n        },\n        addTeam:function () {\n            if(!this.name)\n            {\n                this.$message.error(\"请输入名称\");\n                return;\n            }\n            var _this=this;\n            this.addPending=true;\n            net.post(\"/team/save\",{\n                name:_this.name,\n                dis:_this.dis\n            }).then(function (data) {\n                _this.addPending=false;\n                _this.name=\"\";\n                _this.dis=\"\"\n                if(data.code==200)\n                {\n                    _this.teamList.unshift(data.data);\n                    _this.$notify({\n                        title: '创建成功',\n                        type: 'success'\n                    });\n                    _this.showTeam=false;\n                }\n            })\n        },\n        importProject:function () {\n            $.showBox(this,\"importProject\");\n        },\n        handleApply:function (item,state) {\n            var _this=this;\n            $.startHud();\n            net.put(\"/user/handleapply\",{\n                apply:item._id,\n                state:state\n            }).then(function (data) {\n                $.stopHud();\n                if(data.code==200)\n                {\n                    if(typeof(data.data)==\"object\")\n                    {\n                        item.handle=1;\n                        _this.teamList.unshift(data.data);\n                    }\n                    else\n                    {\n                        item.handle=2;\n                    }\n                }\n                else\n                {\n                    item.handle=3;\n                    $.notify(data.msg,0);\n                }\n            })\n        }\n    },\n    created:function () {\n        var _this=this;\n        Promise.all([\n            net.get(\"/project/list\",{}),\n            net.get(\"/user/applylist\",{})\n        ]).then(function (arr) {\n            $.stopLoading();\n            var data1=arr[0];\n            var data2=arr[1];\n            if(data1.code==200)\n            {\n                for(var i=0;i<data1.data.project.length;i++)\n                {\n                    _this.projectList.push(data1.data.project[i]);\n                }\n                for(var i=0;i<data1.data.team.length;i++)\n                {\n                    _this.teamList.push(data1.data.team[i]);\n                }\n            }\n            else\n            {\n                throw data1.msg;\n            }\n            if(data2.code==200)\n            {\n                data2.data.forEach(function (obj) {\n                    obj.handle=0;\n                })\n                _this.arrApply=data2.data;\n                if(_this.arrApply.length>0)\n                {\n                    _this.showApply=true;\n                }\n            }\n            else\n            {\n                throw data2.msg;\n            }\n        }).catch(function (err) {\n            $.notify(err,0);\n        })\n    },\n})\n$.ready(function () {\n    $.startLoading();\n})\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./web/project/project.js\n// module id = 242\n// module chunks = 6"],"sourceRoot":""}